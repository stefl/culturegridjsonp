!!!
%html{:xmlns=>"http://www.w3.org/1999/xhtml"}
  %head
    %link{:rel=>"shortcut icon", :href=>"/favicon.ico"}
    %meta{"http-equiv"=>"Content-Type", :content=>"text/html;charset=utf-8"}

    %title= "Culturegrid JSONP API proxy"
    
    %link{:href=>'http://fonts.googleapis.com/css?family=Arvo', :rel=>'stylesheet', :type=>'text/css'}
    %style{:type=>"text/css"}
      h1, h2 { font-family: 'Arvo', arial, serif; color: #454; margin-top: 2em;}
      h2 {font-size: 100%};
      body, p { font-family: Helvetica, sans-serif !important; }
      textarea {padding: 1em; border: 2px solid #888; width: 96%; height: 24em;}
      div#page { width: 42em; margin: auto; *zoom: 1; font-family: Helvetica, sans-serif !important;}
      div#get { background-color: #efe; padding: 1em; }
      div#footer {margin-top: 2em; margin-bottom: 2em;}
      a { color: #484;}
  %body
    %div#page
      %h1
        Culturegrid JSONP API proxy

      %p
        %a{:href=>"http://culturegrid.org.uk"}
          Culturegrid 
        is a huge index of cultural assets in the UK (books, photographs, videos, locations...), and has a search API. It's XML, so if you want to do client-side stuff with it in Javascript it's going to be tricky. That's where this API proxy comes in handy.

      %h2
        Send a GET request of this format to this little web service:
      
      %div#get
        %a{:href=>"http://culturegrid.heroku.com/search?q=joy&page=1&per_page=10&callback=abc123"}
          http://culturegrid.heroku.com/search?q=joy&page=1&per_page=10&callback=abc123
      
      %h2
        You will receive something like the following as JSONP:
      
      %textarea
        abc123([{"dc.title":["Essex Record Office: SEAX, the online Catalogue of Essex Record Office"],"aggregator.internal_record_link":"/dpp/resource/2067619/stream/CultureGrid_Collection","aggregator.internal.id":"2067619","dcterms.spatial":["UNITED KINGDOM","England","East of England","\n\t","Essex"],"timestamp":"2009-12-30T08:34:09.28Z","dcterms.isPartOf_AllNames":"People's Network|CG_BREAK|Michael UK DCollections|CG_BREAK|Michael UK","dcmi.type":["Collection"],"dc.identifier":"UK-DC-72c68a83","dc.description":["The online catalogue, SEAX, contains all the Essex Record Office catalogues of individual collections and images of many original documents and illustrations. It can be searched using the 'Full Text Search' or by searching using Personal Names, Place Names, Subjects, Institutions, Document Types, or by using Image Search.  It also contains details of most uncatalogued accessions, which can also be searched."],"authority_name":"Michael UK DCollections","authority":"MichaelUKDCollections","dcterms.isPartOf_AllIDs":"PN|CG_BREAK|MichaelUKDCollections|CG_BREAK|Michael","dcterms.isPartOf":["PN","MichaelUKDCollections","Michael"],"dcterms.isPartOf_Name":["People's Network","Michael UK DCollections","Michael UK"],"restp":"ServiceProvider"},{"dc.title":["Guille-All����s Library"],"aggregator.internal_record_link":"/dpp/resource/1962307/stream/CultureGrid_Institution","aggregator.internal.id":"1962307","vcard.fax":"01481 712425","vcard.email":["gsylib@cionline.com"],"timestamp":"2010-07-13T20:55:30.948Z","oai_is.website":"http://www.gov.gg/Guille-Alles/","vcard.voice":"01481 720392","institution_type":"Local/Regional government","dcterms.isPartOf_AllNames":"Institutions|CG_BREAK|People's Network","institution_address":"Market Street,St Peter Port,Guernsey,GY1 1HB","dcmi.type":["Institution"],"dc.identifier":"40319","institution_sector":"Libraries","authority_name":"MLA Institutions Server","authority":"MLA","unparsed.postcode":["GY1 1HB"],"oai_is.administrativeStatus":"Public","dcterms.isPartOf_AllIDs":"MLAInstitutions|CG_BREAK|PN","dcterms.isPartOf":["MLAInstitutions","PN"],"dcterms.isPartOf_Name":["Institutions","People's Network"],"restp":"ServiceProvider"},{"dc.title":["Easy PC 4 All (Bromley Central Library)"],"aggregator.internal_record_link":"/dpp/resource/1957569/stream/CultureGrid_Institution","aggregator.internal.id":"1957569","ukonline_identifier":"1615.0","timestamp":"2010-07-13T20:51:34.884Z","_localTier9":"0.0","institution_type":"Local/Regional government","dcterms.isPartOf_AllNames":"Institutions|CG_BREAK|People's Network","institution_address":"Central Library,BROMLEY,BR1 1EX","dcmi.type":["Institution"],"dc.identifier":"25855","_localTier10":"0.0","lng":"0.0158154005077274","_localTier11":"0.0","institution_sector":"Libraries","_localTier12":"0.0","oai_is.jurisdiction":"BROMLEY","authority_name":"MLA Institutions Server","authority":"MLA","_localTier13":"0.0","unparsed.postcode":["BR1 1EX"],"oai_is.mlaRegion":"London","oai_is.administrativeStatus":"Public","netbase_identifier":"1854.0","dcterms.isPartOf_AllIDs":"MLAInstitutions|CG_BREAK|PN","dcterms.isPartOf":["MLAInstitutions","PN"],"_localTier14":"0.0","lat":"51.403083211755","dcterms.isPartOf_Name":["Institutions","People's Network"],"_localTier15":"0.0","restp":"ServiceProvider","_localTier16":"0.0"},{"dc.title":["Imperial War Museum All Saints Annexe"],"aggregator.internal_record_link":"/dpp/resource/1962029/stream/CultureGrid_Institution","aggregator.internal.id":"1962029","vcard.email":["film@iwm.org.uk\nphotos@iwm.org.uk\nbooks@iwm.org.uk"],"timestamp":"2010-07-13T20:55:18.476Z","oai_is.website":"http://collections.iwm.org.uk","mla.operational_hours":"Please see website.","_localTier9":"-1.001","vcard.voice":"020 7416 5294 (film)\n020 7416 5333 (photographs)\n020 7416 5344 (sound archive)","institution_type":"Other Public Body","dcterms.isPartOf_AllNames":"Institutions|CG_BREAK|People's Network","mla.usage_conditions":"Public access. Appointment essential.","institution_address":"All Saints Annexe, Austral Street,London,SE11 4SJ","dcmi.type":["Institution"],"dc.identifier":"35292","_localTier10":"-1.0001","lng":"-0.105555923479663","_localTier11":"-1.0001","institution_sector":"Libraries","_localTier12":"-1.0001","authority_name":"MLA Institutions Server","authority":"MLA","_localTier13":"-1.0001","unparsed.postcode":["SE11 4SJ"],"oai_is.mlaRegion":"London","oai_is.administrativeStatus":"Public","dcterms.isPartOf_AllIDs":"MLAInstitutions|CG_BREAK|PN","dcterms.isPartOf":["MLAInstitutions","PN"],"_localTier14":"-1.00001","lat":"51.4932466101527","dcterms.isPartOf_Name":["Institutions","People's Network"],"_localTier15":"-1.00001","restp":"ServiceProvider","_localTier16":"-1.00001"},{"dcterms.rightsHolder":"Seven Stories","dc.title":["The Way of All Flesh"],"aggregator.internal_record_link":"/dpp/resource/2046488/stream/CultureGrid_Item","aggregator.internal.id":"2046488","timestamp":"2010-12-10T06:13:59.008Z","dcterms.isPartOf_AllNames":"Seven Stories|CG_BREAK|People's Network","dc.identifier":"FJ/01/01/037","have_temporal":"false","dc.related.link":"http://collection.sevenstories.org.uk/Dserve/Dserve.exe?dsqIni=dserve.ini&dsqApp=Archive&dsqCmd=Show.tcl&dsqDb=Catalog&dsqPos=0&dsqSearch=(RefNo='FJ/01/01/037')","dcterms.license":"http://creativecommons.org/licenses/by/2.0/uk/","authority_name":"Seven Stories","authority":"SevenStories","dcterms.isPartOf_AllIDs":"SevenStories|CG_BREAK|PN","dcterms.isPartOf":["SevenStories","PN"],"dcterms.isPartOf_Name":["Seven Stories","People's Network"],"restp":"ServiceProvider"},{"dcterms.rightsHolder":"Seven Stories","dc.title":["The Way of All Flesh"],"aggregator.internal_record_link":"/dpp/resource/2047073/stream/CultureGrid_Item","aggregator.internal.id":"2047073","timestamp":"2010-12-10T06:22:21.984Z","dcterms.isPartOf_AllNames":"Seven Stories|CG_BREAK|People's Network","dc.identifier":"FJ/01/09/12","have_temporal":"false","dc.related.link":"http://collection.sevenstories.org.uk/Dserve/Dserve.exe?dsqIni=dserve.ini&dsqApp=Archive&dsqCmd=Show.tcl&dsqDb=Catalog&dsqPos=0&dsqSearch=(RefNo='FJ/01/09/12')","dcterms.license":"http://creativecommons.org/licenses/by/2.0/uk/","authority_name":"Seven Stories","authority":"SevenStories","dcterms.isPartOf_AllIDs":"SevenStories|CG_BREAK|PN","dcterms.isPartOf":["SevenStories","PN"],"dcterms.isPartOf_Name":["Seven Stories","People's Network"],"restp":"ServiceProvider"},{"dcterms.rightsHolder":"Seven Stories","dc.title":["'Dinosaurs and all that Rubbish'"],"aggregator.internal_record_link":"/dpp/resource/2046046/stream/CultureGrid_Item","aggregator.internal.id":"2046046","timestamp":"2010-12-10T06:04:25.505Z","dcterms.isPartOf_AllNames":"Seven Stories|CG_BREAK|People's Network","dcmi.type":["Unknown"],"dc.identifier":"DW/01/09","dc.description":["Contains notes, drafts, music and proofs for 'Dinosaurs and all that Rubbish'."],"have_temporal":"false","dc.related.link":"http://collection.sevenstories.org.uk/Dserve/Dserve.exe?dsqIni=dserve.ini&dsqApp=Archive&dsqCmd=Show.tcl&dsqDb=Catalog&dsqPos=0&dsqSearch=(RefNo='DW/01/09')","dcterms.license":"http://creativecommons.org/licenses/by/2.0/uk/","dc.subject":["Seven Stories"],"authority_name":"Seven Stories","authority":"SevenStories","dcterms.isPartOf_AllIDs":"SevenStories|CG_BREAK|PN","dcterms.isPartOf":["SevenStories","PN"],"dcterms.isPartOf_Name":["Seven Stories","People's Network"],"restp":"ServiceProvider"},{"dcterms.rightsHolder":"Leeds Central Library","dc.title":["All Saints Avenue, All Saints Terrace"],"aggregator.internal_record_link":"/dpp/resource/2139662/stream/CultureGrid_Item","aggregator.internal.id":"2139662","dcterms.spatial":["World, Europe, United Kingdom"],"timestamp":"2010-12-07T11:01:24.295Z","dcterms.isPartOf_AllNames":"People's Network|CG_BREAK|Leodis","pndsterms.thumbnail":"http://www.leodis.net/imagesLeodis/thumbnail/60/2004225_41056460.jpg","dcmi.type":["Image"],"dc.identifier":"http://www.leodis.net/display.aspx?id=2004225_41056460","dc.description":["29th July 1963\nImage shows on the far left a small boy stood at the corner of All Saints Street and All Saints Avenue where the gable end of a row of back-to-back terraced houses are visible, numbers 3 to 7 All Saints Terrace. The houses are split between numbers 4 and 5 by a shared outside toilet yard."],"cached_thumbnail":"/dpp/resource/2139662/stream/thumbnail_image_jpeg","have_temporal":"false","dc.related.link":"http://www.leodis.net/display.aspx?id=2004225_41056460","dcterms.license":"http://www.leodis.net/article.aspx?id=12","dc.subject":["All Saints Terrace","All Saints Avenue"],"authority_name":"Leodis - A photographic archive of Leeds","authority":"Leodis","dcterms.isPartOf_AllIDs":"PN|CG_BREAK|Leodis","dcterms.isPartOf":["PN","Leodis"],"dcterms.isPartOf_Name":["People's Network","Leodis"],"restp":"ServiceProvider"},{"dcterms.rightsHolder":". Contact copyright@commanet.org for further details","dc.title":["All Saints Church (built 1869), All Saints Road, Shildonn attended by railway workers at Shildon Works."],"dc.language":"en-UK","aggregator.internal_record_link":"/dpp/resource/1901612/stream/CultureGrid_Item","aggregator.internal.id":"1901612","dcterms.spatial":["All Saints Church","NZ232258"],"timestamp":"2009-12-30T20:07:14.346Z","dcterms.isPartOf_AllNames":"People's Network|CG_BREAK|Commanet","dc.contributor":["Time Tracks Archive of Locomotion - Shildon"],"pndsterms.thumbnail":"http://www.commanet.org/small/cneta0m700cp.jpg","dcmi.type":["StillImage"],"dc.identifier":"http://www.commanet.org/reflect.aspx?rec=5009999900090967","dc.description":["All Saints Church (built 1869), All Saints Road, Shildonn attended by railway workers at Shildon Works.; Still Image; www.commanet.org"],"cached_thumbnail":"/dpp/resource/1901612/stream/thumbnail_image_jpeg","dc.related.link":"http://www.commanet.org/reflect.aspx?rec=5009999900090967","dc.publisher":"http://www.commanet.org","dcterms.license":"http://creativecommons.org/licenses/by/2.0/uk/","dc.subject":["Buildings","Religious","The 1900s","\n\t","x0"],"authority_name":"Commanet","authority":"Commanet","dcterms.temporal":["x0 ,"],"dcterms.isPartOf_AllIDs":"PN|CG_BREAK|Commanet","dcterms.isPartOf":["PN","Commanet"],"dcterms.isPartOf_Name":["People's Network","Commanet"],"restp":"ServiceProvider","dcterms.audience":["UK Educational Level 1","UK Educational Level 2","UK Educational Level 3","\n\t","UK Educational Level 4","UK Educational Level 5","UK Educational Level 6","UK Educational Level 7","\n\t","UK Educational Level 8","UK Educational Level 9","UK Educational Level 10","UK Educational Level 11","\n\t","UK Educational Level 12"]},{"dcterms.rightsHolder":"Devon County Council","dc.title":["[ Chardstock All Saints :  churches : All Saints?]"],"dc.language":"en-GB","aggregator.internal_record_link":"/dpp/resource/1719244/stream/CultureGrid_Item","aggregator.internal.id":"1719244","dcterms.spatial":["World, Europe, United Kingdom, England, Devon, Chardstock"],"timestamp":"2009-12-30T21:10:01.208Z","dcterms.isPartOf_AllNames":"People's Network|CG_BREAK|Devon Etched","dcmi.type":["Image"],"dc.identifier":"http://www.devon.gov.uk/etched?url=etched/ixbin/hixclient.exe&_IXP_=1&_IXR=82358","dc.description":["Image covering Devon. Chardstock. Churches. All Saints. 1920 produced 1920"],"dc.related.link":"http://www.devon.gov.uk/etched?url=etched/ixbin/hixclient.exe&_IXP_=1&_IXR=82358","dc.publisher":"[s.n.]","dc.format":["image/jpeg"],"dcterms.license":"http://creativecommons.org/licenses/by-sa/2.0/","dc.subject":["All Saints","Churches","All Saints"],"authority_name":"Devon Etched","authority":"DevonEtched","dcterms.temporal":["start=1920; end=1920;"],"dcterms.isPartOf_AllIDs":"PN|CG_BREAK|DevonEtched","dcterms.isPartOf":["PN","DevonEtched"],"dcterms.isPartOf_Name":["People's Network","Devon Etched"],"restp":"ServiceProvider"}])
      %div#footer
        Knocked together by 
        %a{:href=>"http://stef.io", :rel=>"me"}
          Stef
        (
        %a{:href=>"http://twitter.com/stef", :rel=>"me"}
          @stef on Twitter
        )
        
        for 
        
        %a{:href=>"http://culturehackday.org.uk"}
          Culture Hack Day
        
        %a{:href=>"http://github.com/stefl/culturegridjsonp"}
          Source code and documentation
          
        